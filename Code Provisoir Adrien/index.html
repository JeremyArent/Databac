<html><!DOCTYPE HTML>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title></title>
	<link href="//fonts.googleapis.com/css?family=Dosis:200,300,400,500,600,700,800" rel="stylesheet" type="text/css">
	<script src="http://d3js.org/d3.v3.js"></script>
	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<script src="./DataLoader.js" type="text/javascript"></script>
	<script type="text/javascript" src="jquery.easing.1.3.js"></script>
	<script src="./BAC.js" type="text/javascript"></script>
	<script src="./candidats.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			(new DataLoader('./json.json')).initialized(function(data, dataLoader){

				var bac = new BAC(
					dataLoader, 
					$('.bacr'),
					function(data){
						$({c:0}).delay(1000).animate({c: Math.round(data.TOTAL.value * 100) }, { 
							step: function(now) {
								$("#counter").html(Math.round(now));
							},
							duration: 3000,
							easing: "easeOutQuart"        
						});
					}
				);
				var candidat=new Candidat(
						dataLoader,
						$('.AllCandidats')
					);
				$('button').click(function(){
					bac.refresh($(this).data('city'), 2013)
					candidat.refresh($(this).data('city'), 2013)
				});   
			}).initialized(function(data, dataLoader){

				

			});
			/*
		 var amount=parseInt($('#amount').val());*/
			 
		});
	</script>
	<style type="text/css">
	.bacr {
		width: 400px;
		margin:0 auto;
		height: 300px;
	}
	.AllCandidats
	{
		width:445px;
		height:75px;
	}
	.numberTotal,.candidats
	{
		width:100%;
		text-align: center;
	}
	.S,.ES,.L,.numberTotal,.candidats
	{
		float:left;
		height:100%;
	}
	.candS
	{
		background-color: #FF8830;
	}
	.candES
	{
		background-color: #394844;
	}
	.candL
	{
		background-color: #c3a92c;
	}
	</style>
	

</head>
<body>
	<button data-city="NICE" type="button">NICE</button>
	<button data-city="PARIS" type="button">PARIS</button>
	<button data-city="TOULOUSE" type="button">TOULOUSE</button>
	<button data-city="LYON" type="button">LYON</button>
	<button data-city="BORDEAUX" type="button">BORDEAUX</button>
	<button data-city="STRASBOURG" type="button">STRASBOURG</button>
	<div id="counter">
			<!--<input type="hidden" value="300000" id="amount">
			<input type="text" value="0" id="count" readonly="readonly">-->
			
		</div>
	<div class="AllCandidats">
		<div class="numberTotal">

		</div>
		<div class="candidats">
			<div class="candS S">

			</div>
			<div class="candES ES">

			</div>
			<div class="candL L">

			</div>
		</div>
		<div class="compteurCand">
			<div class="compteurS S">

			</div>
			<div class="compteurES ES">

			</div>
			<div class="compteurL L">

			</div>
		</div>
	</div>
	<div class="bacr">

	</div>
</body>
</html>